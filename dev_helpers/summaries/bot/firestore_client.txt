hash:6a7eed810f1f9f34120d516323045ab358820688c63f2b340a77c871868539b0
path:bot/firestore_client.py | source:bot/firestore_client.py | lastUpdated:2025-05-24T14:12:19.684227 | lines:296

This Python file serves as a client for Google Cloud Firestore, providing functions to manage user-specific data. It handles conversation history (`get_history`, `add_message`), summaries (`get_summaries`, `add_summary`), custom system prompts, and user settings (`get_user_settings`, `set_user_settings`). The Firestore client is initialized lazily via `get_db()`, and all database operations are wrapped with retry logic for robustness. It allows retrieving history and summaries sorted by timestamp and finding users by timezone. The main purpose is to abstract Firestore interactions for various user data types.