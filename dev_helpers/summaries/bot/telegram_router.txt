hash:69ae95a9b7f139666ad127ebc12c336f0e3245952d63021a3b3038d0c633520b
path:bot/telegram_router.py | source:bot/telegram_router.py | lastUpdated:2025-05-25T16:28:08.067182 | lines:290

This file `telegram_router.py` acts as the main router and handler for a Telegram bot. It defines functions to process user commands like `/start`, `/help`, and `/timezone`, and handles regular text messages. The script integrates with Firestore to manage user data, chat history, system prompts, and summaries, and uses OpenAI to generate AI responses based on the conversation context. It includes logic for prompting users to set their timezone and managing the length of the chat history. Key functions include `setup_handlers` to register handlers and `handle_message` for processing user input and generating AI replies.