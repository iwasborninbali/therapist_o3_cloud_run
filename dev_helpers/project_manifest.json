{
  "name": "telegram-ai-assistant",
  "version": "0.1.0",
  "description": "A Telegram bot that uses OpenAI for conversations with context management in Firebase",
  "modules": [
    {
      "name": "bot.main",
      "path": "bot/main.py",
      "description": "FastAPI application and entry point"
    },
    {
      "name": "bot.telegram_router",
      "path": "bot/telegram_router.py",
      "description": "Telegram message handling and routing"
    },
    {
      "name": "bot.openai_client",
      "path": "bot/openai_client.py",
      "description": "OpenAI API integration for generating responses"
    },
    {
      "name": "bot.firestore_client",
      "path": "bot/firestore_client.py",
      "description": "Firebase Firestore operations for data persistence"
    },
    {
      "name": "bot.summarizer",
      "path": "bot/summarizer.py",
      "description": "Conversation summarization using Gemini API"
    },
    {
      "name": "bot.history_manager",
      "path": "bot/history_manager.py",
      "description": "Manages conversation history, triggers summarization, and stores summaries"
    },
    {
      "name": "scripts.proactive_messages",
      "path": "scripts/proactive_messages.py",
      "description": "Universal proactive message scheduler with per-user timezone support"
    },
    {
      "name": "scripts.set_webhook",
      "path": "scripts/set_webhook.py",
      "description": "Script to register Telegram webhook"
    },
    {
      "name": "config",
      "path": "config.py",
      "description": "Environment and configuration management"
    }
  ],
  "collections": [
    {
      "name": "history",
      "description": "Stores conversation messages by user ID with timestamps"
    },
    {
      "name": "summaries",
      "description": "Stores summarized conversation chunks (max 5 per user)"
    },
    {
      "name": "system_prompts",
      "description": "Stores customized system prompts by user ID"
    },
    {
      "name": "user_settings",
      "description": "Stores user preferences including timezone settings"
    },
    {
      "name": "proactive_meta",
      "description": "Tracks last sent dates for proactive messages to prevent duplicates"
    }
  ],
  "dependencies": [
    "python-telegram-bot",
    "google-cloud-firestore",
    "openai",
    "google-generativeai",
    "python-dotenv",
    "fastapi",
    "uvicorn",
    "pydantic",
    "pytz",
    "requests"
  ],
  "architecture_decisions": [
    {
      "id": "ADR-0001",
      "title": "Use Firebase Firestore for Data Storage",
      "path": "docs/ADR-0001-firestore-storage.md"
    },
    {
      "id": "ADR-0002", 
      "title": "Dual Service Deployment Strategy",
      "path": "docs/ADR-0002-dual-service-deployment.md"
    },
    {
      "id": "ADR-0003",
      "title": "Keep Proactive Scheduler in a Dedicated Cloud Run Service", 
      "path": "docs/ADR-0003-scheduler-as-separate-service.md"
    }
  ]
} 